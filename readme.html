<!DOCTYPE html>
<html>
<head>
    <title>Adding Abc.Dignostics libraries to your .NET project</title>
</head>
<body>

    <h3 id="adding-abc.dignostics-libraries-to-your.net-project">Adding Abc.Dignostics libraries to your .NET project</h3>
<p>The best and easiest way to add the Abc.Dignostics libraries to your .NET project is to use the NuGet package manager.</p>
<h4 id="with-visual-studio-ide">With Visual Studio IDE</h4>
<p>From within Visual Studio, you can use the NuGet GUI to search for and install the Abc.Dignostics NuGet package. Or, as a shortcut, simply type the following command into the Package Manager Console:</p>
<p>Install-Package Abc.Diagnostics</p>
<h3 id="configuration">Configuration</h3>
<p>Configure sections in application configuration file</p>
<pre><code class="language-xml">&lt;configSections&gt;
    &lt;section name=&quot;diagnosticConfiguration&quot; type=&quot;Abc.Diagnostics.Configuration.DiagnosticSettings, Abc.Diagnostics, Version=1.2.0.0&quot;/&gt;
&lt;/configSections&gt;
</code></pre>
<h3 id="nuget-package-changes">Nuget package changes</h3>
<p>Nuget package <em>Abc.Diagnostics.dll</em> splitted to two packages
<em>Abc.Diagnostics V1.0</em> for net20, net35 and <em>Abc.Diagnostics V1.2</em> for net4.5, netstandart16, netstandart2.</p>
<h4 id="retarget.net20.net3.0.net3.5.net4.0-project-to-abc.diagnostics-v1.0">Retarget .NET20, .NET3.0, .NET3.5, .NET4.0 project to Abc.Diagnostics V1.0</h4>
<ul>
<li><p>Type the following commands into the Package Manager Console:</p>
<ul>
<li><p>Unnstall-Package Abc.Diagnostics.dll</p>
</li>
<li><p>Install-Package Abc.Diagnostics -Version 1.0.11</p>
</li>
</ul>
</li>
</ul>
<h4 id="retarget.net45-project-to-abc.diagnostics-v1.2">Retarget .NET45 project to Abc.Diagnostics V1.2</h4>
<ul>
<li><p>Type the following commands into the Package Manager Console:</p>
<ul>
<li><p>Unnstall-Package Abc.Diagnostics.dll</p>
</li>
<li><p>Install-Package Abc.Diagnostics</p>
</li>
</ul>
</li>
<li><p>Replace namespace <em>Diagnostic</em> to <em>Abc.Diagnostics</em></p>
</li>
<li><p>Recompile project</p>
</li>
</ul>
<h3 id="configuration-for-development-and-test-environment">Configuration for development and test environment</h3>
<h4 id="configuration-using-system.diagnostics">Configuration using system.diagnostics</h4>
<p>Configure sections in application configuration file</p>
<pre><code class="language-xml">&lt;configSections&gt;
    &lt;section name=&quot;diagnosticConfiguration&quot; type=&quot;Abc.Diagnostics.Configuration.DiagnosticSettings, Abc.Diagnostics, Version=1.2.0.0&quot;/&gt;
&lt;/configSections&gt;
</code></pre>
<p>Use <em>Abc.Diagnostics.DefaultLogWriter</em> to write in XML format</p>
<pre><code class="language-xml">&lt;diagnosticConfiguration type=&quot;Abc.Diagnostics.DefaultLogWriter, Abc.Diagnostics&quot; defaultCategory=&quot;category&quot; /&gt;
</code></pre>
<p>Use <em>System.Diagnostics.XmlWriterTraceListener</em> to write to a file</p>
<pre><code class="language-xml">&lt;system.diagnostics&gt;
    &lt;sources&gt;
        &lt;source name=&quot;category&quot; switchValue=&quot;All&quot;&gt;
            &lt;listeners&gt;
                &lt;add name=&quot;listener&quot; initializeData=&quot;trace.svclog&quot; type=&quot;System.Diagnostics.XmlWriterTraceListener, System.Diagnostics&quot; /&gt;
            &lt;/listeners&gt; 
        &lt;/source&gt;
    &lt;/sources&gt;
&lt;/system.diagnostics&gt;
</code></pre>
<h4 id="configuration-using-microsoft-enterprise-library">Configuration using Microsoft enterprise library</h4>
<p>Configure sections in application configuration file</p>
<pre><code class="language-xml">&lt;configSections&gt;
    &lt;section name=&quot;diagnosticConfiguration&quot; type=&quot;Abc.Diagnostics.Configuration.DiagnosticSettings, Abc.Diagnostics, Version=1.2.0.0&quot;/&gt;
    &lt;section name=&quot;loggingConfiguration&quot; type=&quot;Microsoft.Practices.EnterpriseLibrary.Logging.Configuration.LoggingSettings, Microsoft.Practices.EnterpriseLibrary.Logging, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35&quot;/&gt;
    &lt;section name=&quot;dataConfiguration&quot; type=&quot;Microsoft.Practices.EnterpriseLibrary.Data.Configuration.DatabaseSettings, Microsoft.Practices.EnterpriseLibrary.Data, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35&quot;/&gt;
&lt;/configSections&gt;
</code></pre>
<p>Use log writer according table below</p>
<table>
<thead>
<tr>
<th>EntrLib version</th>
<th style="text-align: left;">type</th>
</tr>
</thead>
<tbody>
<tr>
<td>V3.0</td>
<td style="text-align: left;">Abc.Diagnostics.EntrLib30LogWriter</td>
</tr>
<tr>
<td>V4.0</td>
<td style="text-align: left;">Abc.Diagnostics.EntrLib40LogWriter</td>
</tr>
<tr>
<td>V5.0, V5.0 Upd 1</td>
<td style="text-align: left;">Abc.Diagnostics.EntrLib50LogWriter</td>
</tr>
<tr>
<td>V6.0</td>
<td style="text-align: left;">Abc.Diagnostics.EntrLib60LogWriter</td>
</tr>
</tbody>
</table>
<pre><code class="language-xml">&lt;diagnosticConfiguration type=&quot;Abc.Diagnostics.EntrLib40LogWriter, Abc.Diagnostics&quot;/&gt;
</code></pre>
<p>Configure microsoft Enterprise Library logging section.
Use <em>Microsoft.Practices.EnterpriseLibrary.Logging.TraceListeners.XmlTraceListener</em> to write to a file</p>
<pre><code class="language-xml">&lt;loggingConfiguration name=&quot;Logging Application Block&quot; defaultCategory=&quot;category&quot;&gt;
    &lt;listeners&gt;
      &lt;add name=&quot;listener&quot; type=&quot;Microsoft.Practices.EnterpriseLibrary.Logging.TraceListeners.XmlTraceListener, Microsoft.Practices.EnterpriseLibrary.Logging&quot;/&gt;
    &lt;/listeners&gt;
    
    &lt;categorySources&gt;
      &lt;add name=&quot;category&quot; switchValue=&quot;All&quot;&gt;
        &lt;listeners&gt;
          &lt;add name=&quot;listener&quot;/&gt;
        &lt;/listeners&gt;
      &lt;/add&gt;
    &lt;/categorySources&gt;
&lt;/loggingConfiguration&gt;
</code></pre>
<h4 id="configuration-multiple-destinations">Configuration multiple destinations</h4>
<p>Configure sections in application configuration file</p>
<pre><code class="language-xml">&lt;configSections&gt;
    &lt;section name=&quot;diagnosticConfiguration&quot; type=&quot;Abc.Diagnostics.Configuration.DiagnosticSettings, Abc.Diagnostics, Version=1.2.0.0&quot;/&gt;
&lt;/configSections&gt;
</code></pre>
<p>Use <em>Abc.Diagnostics.RoutedLogWriter</em> to write in different formats.
Events with <strong>Kdvvdb</strong> category writes using <em>Viss.Diagnostics.VissLogWriter</em>, others events writes using <em>Abc.Diagnostics.DefaultLogWriter</em></p>
<pre><code class="language-xml">&lt;diagnosticConfiguration type=&quot;Abc.Diagnostics.RoutedLogWriter, Abc.Diagnostics&quot; defaultCategory=&quot;category&quot;&gt;
    &lt;filters&gt;
        &lt;fileter categories=&quot;Kdvvdb&quot; type=&quot;Viss.Diagnostics.VissLogWriter, Viss.Diagnostics&quot; /&gt;
        &lt;fileter categories=&quot;*&quot; type=&quot;Abc.Diagnostics.DefaultLogWriter, Abc.Diagnostics&quot; /&gt;
    &lt;/filters&gt;
&lt;/diagnosticConfiguration&gt;
</code></pre>
<p>Use <em>System.Diagnostics.XmlWriterTraceListener</em> to write to a file and use <em>Viss.Diagnostics.KdvvdbTraceListener</em> to write to a MassTransit</p>
<pre><code class="language-xml">&lt;system.diagnostics&gt;
    &lt;sources&gt;
        &lt;source name=&quot;category&quot; switchValue=&quot;All&quot;&gt;
            &lt;listeners&gt;
                &lt;add name=&quot;listener&quot; initializeData=&quot;trace.svclog&quot; type=&quot;System.Diagnostics.XmlWriterTraceListener, System.Diagnostics&quot; /&gt;
            &lt;/listeners&gt; 
        &lt;/source&gt;
      &lt;source name=&quot;Kdvvdb&quot; switchValue=&quot;All&quot;&gt;
        &lt;listeners&gt;
          &lt;add name=&quot;{$name}&quot; type=&quot;Viss.Diagnostics.KdvvdbTraceListener, Viss.Diagnostics&quot; initializeData=&quot;rabbitmq://{$host}/{$path}&quot; username=&quot;{$username}&quot; password=&quot;{$password}&quot; /&gt;
        &lt;/listeners&gt;
      &lt;/source&gt;
    &lt;/sources&gt;
&lt;/system.diagnostics&gt;
</code></pre>


</body>
</html>